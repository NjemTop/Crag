{% extends 'main/base.html' %}
{% load static %}

{% block title %}
{{ title }}
{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-12 text-center">
        <a href="{% url 'create_client' %}" class="btn btn-primary rounded-pill mb-4">Добавить нового клиента</a>
        <h1 class="mt-4 display-4">Список всех клиентов</h1>
    </div>
</div>
<div class="row">
    <div class="col-md-12">
        {% if clients %}
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th scope="col">ID</th>
                        <th scope="col">Имя клиента</th>
                        <th scope="col">Статус контакта</th>
                        <th scope="col">Карточка клиента</th>
                        <th scope="col">Обслуживание</th>
                        <th scope="col">Тех. Информация</th>
                        <th scope="col">Интеграции</th>
                        <th scope="col">Документы</th>
                        <th scope="col">Заметки</th>
                        <th scope="col">Действие</th>
                    </tr>
                </thead>
                <tbody>
                    {% for client in clients %}
                        <tr>
                            <td>{{ client.id }}</td>
                            <td><a>{{ client.client_name }}</a></td>
                            <td>
                                <input type="checkbox" id="client_{{ client.id }}" class="client-active-checkbox" {% if client.contact_status %}checked{% endif %}>
                            </td>
                            <td>
                                <a href="#" data-bs-toggle="modal" data-bs-target="#clientCardModal_{{ client.id }}" data-client-id="{{ client.id }}"><img src="/media/favicons/icon_card.png" alt="Карточка клиента" class="img-small" /></a>
                            </td>
                            <td>
                                <a href="#" data-bs-toggle="modal" data-bs-target="#serviceModal_{{ client.id }}" data-client-id="{{ client.id }}"><img src="/media/favicons/icon_service.png" alt="Обслуживание" class="img-small" /></a>
                            </td>
                            <td>
                                <a href="#" data-bs-toggle="modal" data-bs-target="#tech_informationModal_{{ client.id }}" data-client-id="{{ client.id }}"><img src="/media/favicons/icon_tech_info.png" alt="Тех. Информация" class="img-small" /></a>
                            </td>
                            <td>
                                <a href="#"><img src="/media/favicons/icon_integrations.png" alt="Интеграции" class="img-small" /></a>
                            </td>
                            <td>
                                <a href="#"><img src="/media/favicons/icon_documents.png" alt="Документы" class="img-small" /></a>
                            </td>
                            <td>{{ client.notes }}</td>
                            <td>
                                <a href="#" class="btn btn-warning btn-sm">Посмотреть</a>
                                <a href="#" class="btn btn-danger btn-sm">Удалить</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% include 'main/client_card_modal.html' with clients=clients %}
            {% include 'main/service_modal.html' with clients=clients %}
            {% include 'main/tech_information_modal.html' with clients=clients %}
            {% include 'main/contact_modal.html' with clients=clients %}
        {% else %}
            <p>Нет доступных клиентов.</p>
        {% endif %}
    </div>
</div>

<!-- Подключаем файлы JavaScript -->
<script src="{% static 'js/client_status.js' %}"></script>
<script src="{% static 'js/service_modal.js' %}"></script>
<script src="{% static 'js/tech_information_modal.js' %}"></script>
<script src="{% static 'js/client_card_modal.js' %}"></script>
<script src="{% static 'js/contact_modal.js' %}"></script>

{% endblock %}
